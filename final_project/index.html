<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Example of Using Leaflet</title>

    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

   <link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    
    <!-- Assorted support files -->  
  <script type="text/javascript" src="coffeescript.js"></script>
    <script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>
    <script type='text/javascript' src='http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js?2'></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script type='text/javascript' src="//assets-datawrapper.s3.amazonaws.com/vendor/chroma-js/0.5.2/chroma.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.css' rel='stylesheet' />


    <style>
        #container_map {
          width: 1300px;
          height: 650px;
          /*
          border: 1px;
          border-style: solid;
          border-color: #AAA;
          */
          padding: 5px 20px 20px 20px;
        }

        #container {
          /*
          border: 1px;
          border-style: solid;
          */
          border-color: #AAA;
        }

        #map {
            width: 1260px;
            height: 580px;
        }

        #title {
            width: 1300px;
            height: 50px;   
        }

        h1 {
          text-align: center;
        }

        h2 {
          text-align: center;
        }

        p {
          text-align: center;
        }





    </style>
</head>



<body>
	<h1>Interactivity with Geographic Data</h1>
    <div id="container_map">
      <div id="container" style="width: 100%; text-align:center;">
        <div id="container" style="width: 900px; height: 75px; display: table-cell; float: left; vertical-align: middle;"> <h2 id="flexi-text" text-align="left" float="left">Please select a metric you would like to display:</h2></div>
            <div id="container" style="margin-left: 700px; height: 75px; display: table-cell; vertical-align: middle;">
              <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Make a Selection
                <span class="caret"></span></button>
                  <ul class="dropdown-menu">
                    <li><a href="#" onclick="myFunction(0)">Clear Map</a></li>
                    <li><a href="#" style="background-color:#ff0000;" onclick="myFunction(1)">Parameter One</a></li>
                    <li><a href="#" style="background-color:#0000ff;" onclick="myFunction(2)">Parameter Two</a></li>
                    <li><a href="#" style="background-color:#00ff00;" onclick="myFunction(3)">Parameter Three</a></li>

                  </ul>
              </div>
            </div>
        </div>
  
    <!-- Map div that contains the sstuff to be drawn on! -->
      <div id="title"><h2>You haven't made a selection yet!</h2></div>
      <div id="map" style="border: 1px solid #AAA;"></div>
     
      <!--
    
      <div id="interact"><button class="btn btn-primary" onclick="printpixeldata()">Interact with the map!</button></div>
    
      -->
      
    <!-- Secondary Object to Draw D3 Elements to -->

    </div>
    
    <!-- Container for us-states.js and the associated data-->
    <script src='us-states.js'></script>
    <script src='updated-us-states-2.js'></script>

    <script>
        // initialize the map
    var mapboxAccessToken = 'pk.eyJ1Ijoiam1qYXNwZXI4OSIsImEiOiJjaW11eHB1eTAwMmttdjlrazhtZHpuajI3In0.yAa8YVEg34RrvmYb6xldQA';
		var map = L.map('map').setView([37.8, -96], 4);

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=' + mapboxAccessToken, {
    		id: 'mapbox.light',
    		attribution: '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		}).addTo(map);


    function printpixeldata(){
    var imagedata;
    var canvas = document.getElementById("map");
    console.log(canvas)
    imagedata = canvas.getContext("2d");
    //.getImageData(dragrect.attr("x"), dragrect.attr("y"), width, height);

    for (var x=0; x< width *height*4; x+=1)
      alert(imagedata.data[x])
      console.log(imagedata);
  }


    

    function getColor(d) {
        return d > 80  ? '#000080' :
               d > 70  ? '#0000FF' :
               d > 60  ? '#6495ED' :
               d > 50  ? '#87CEFA' :
               d > 40  ? '#FFA07A' :
               d > 30  ? '#FF0000' :
               d > 20  ? '#FED976' :
                         '#8B0000';
    }

    function style(feature) {
        return {
            fillColor: getColor(feature.properties.democratic),
            weight: 2,
            opacity: 1,
            color: 'white',
            dashArray: '3',
            fillOpacity: 0.7
        };
    }

    //ADD the following -- pass the unique features, develop lookup
    function myFunction(x){
      console.log(x)
      var canvasTiles = L.tileLayer.canvas();
      L.geoJson(statesData, {style: style, renderer: canvasTiles}).addTo(map);
    }


    </script>
</body>

</html>